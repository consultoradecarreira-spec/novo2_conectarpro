<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Prestador - ConectarPRO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
            <a href="/" class="text-3xl font-bold">
                <span class="text-black">Conectar</span><span class="text-orange-500">PRO</span>
            </a>
            
            <!-- Desktop Menu -->
            <nav class="hidden md:flex gap-8 items-center">
                <a href="/encontrar-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium">Encontrar Prestador</a>
                <a href="/indicar-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium">Indicar Prestador</a>
                <a href="/cadastro-morador.html" class="text-gray-700 hover:text-orange-500 transition font-medium">Sou Morador</a>
                <a href="/cadastro-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium">Sou Prestador</a>
                <a href="#" class="text-gray-700 hover:text-orange-500 transition font-medium">Blog</a>
                <a href="#" class="text-gray-700 hover:text-orange-500 transition font-medium">Entrar</a>
            </nav>
            
            <!-- Mobile Menu Button -->
            <button class="md:hidden text-gray-700" onclick="toggleMobileMenu()">â˜°</button>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobileMenu" class="hidden md:hidden bg-white border-t border-gray-200">
            <nav class="max-w-7xl mx-auto px-4 py-4 flex flex-col gap-4">
                <a href="/encontrar-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Encontrar Prestador</a>
                <a href="/indicar-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Indicar Prestador</a>
                <a href="/cadastro-morador.html" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Sou Morador</a>
                <a href="/cadastro-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Sou Prestador</a>
                <a href="#" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Blog</a>
                <a href="#" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Entrar</a>
            </nav>
        </div>
    </header>
    
    <script>
        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        }
    </script>

    <!-- Main Content -->
    <main class="max-w-2xl mx-auto px-4 py-12">
        <div class="bg-white rounded-lg shadow-lg p-8">
            <h1 class="text-4xl font-bold text-gray-900 mb-2">Cadastro de Prestador</h1>
            <p class="text-gray-600 mb-8">Preencha o formulÃ¡rio abaixo para se registrar como prestador de serviÃ§os</p>

            <!-- Mensagens de Feedback -->
            <div id="successMessage" class="hidden mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg">
                âœ… Cadastro realizado com sucesso! VocÃª serÃ¡ redirecionado em breve...
            </div>
            <div id="errorMessage" class="hidden mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg">
                âŒ Erro ao cadastrar. Por favor, tente novamente.
            </div>

            <!-- FormulÃ¡rio -->
            <form id="formPrestador" class="space-y-6">
                <!-- Nome -->
                <div>
                    <label for="nome" class="block text-sm font-medium text-gray-700 mb-2">Nome Completo *</label>
                    <input type="text" id="nome" name="nome" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="Seu nome completo">
                </div>

                <!-- Email -->
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
                    <input type="email" id="email" name="email" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="seu@email.com">
                </div>

                <!-- Telefone -->
                <div>
                    <label for="telefone" class="block text-sm font-medium text-gray-700 mb-2">Telefone/WhatsApp *</label>
                    <input type="tel" id="telefone" name="telefone" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="(11) 99999-9999">
                </div>

                <!-- ProfissÃ£o -->
                <div>
                    <label for="profissao" class="block text-sm font-medium text-gray-700 mb-2">ProfissÃ£o/Especialidade *</label>
                    <input type="text" id="profissao" name="profissao" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="Ex: Encanador, Eletricista, etc">
                </div>

                <!-- Categoria -->
                <div>
                    <label for="categoria" class="block text-sm font-medium text-gray-700 mb-2">Categoria *</label>
                    <select id="categoria" name="categoria" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        <option value="">Selecione uma categoria</option>
                        <option value="AlimentaÃ§Ã£o">ğŸ½ï¸ AlimentaÃ§Ã£o</option>
                        <option value="Automotivo">ğŸš— Automotivo</option>
                        <option value="Bem-Estar">ğŸ’† Bem-Estar</option>
                        <option value="Carreira e Consultoria">ğŸ’¼ Carreira e Consultoria</option>
                        <option value="Costuras e Reparos">âœ‚ï¸ Costuras e Reparos</option>
                        <option value="DedetizaÃ§Ã£o">ğŸ› DedetizaÃ§Ã£o</option>
                        <option value="Delivery">ğŸšš Delivery</option>
                        <option value="Eventos e Lazer">ğŸ‰ Eventos e Lazer</option>
                        <option value="Jardinagem">ğŸŒ± Jardinagem</option>
                        <option value="MudanÃ§as e Carretos">ğŸ“¦ MudanÃ§as e Carretos</option>
                        <option value="Pets">ğŸ• Pets</option>
                        <option value="Pinturas & Cia">ğŸ¨ Pinturas & Cia</option>
                        <option value="Presentes e Mimos">ğŸ Presentes e Mimos</option>
                        <option value="Reformas e Reparos">ğŸ”§ Reformas e Reparos</option>
                        <option value="SeguranÃ§a">ğŸ›¡ï¸ SeguranÃ§a</option>
                        <option value="ServiÃ§os de EmergÃªncia">âš ï¸ ServiÃ§os de EmergÃªncia</option>
                        <option value="ServiÃ§os DomÃ©sticos">ğŸ  ServiÃ§os DomÃ©sticos</option>
                        <option value="Sustentabilidade">â™»ï¸ Sustentabilidade</option>
                        <option value="Transporte">ğŸš Transporte</option>
                        <option value="Viagem e Turismo">âœˆï¸ Viagem e Turismo</option>
                    </select>
                </div>

                <!-- DescriÃ§Ã£o -->
                <div>
                    <label for="descricao" class="block text-sm font-medium text-gray-700 mb-2">DescriÃ§Ã£o do ServiÃ§o</label>
                    <textarea id="descricao" name="descricao" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="Descreva seus serviÃ§os, experiÃªncia e diferenciais..."></textarea>
                </div>

                <!-- BotÃ£o Submit -->
                <div class="flex gap-4">
                    <button type="submit" class="flex-1 bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 rounded-lg transition">
                        Cadastrar como Prestador
                    </button>
                    <a href="/" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-900 font-bold py-3 rounded-lg transition text-center">
                        Cancelar
                    </a>
                </div>

                <p class="text-sm text-gray-600 text-center">
                    * Campos obrigatÃ³rios
                </p>
            </form>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white mt-12">
        <div class="max-w-7xl mx-auto px-4 py-8 text-center">
            <p>&copy; 2024 ConectarPRO. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script>
        // Inicializar Supabase
        const SUPABASE_URL = 'https://dvbomxvwqspdtyeuyiwl.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR2Ym9teHZ3cXNwZHR5ZXV5aXdsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI2NTU4NjEsImV4cCI6MjA3ODIzMTg2MX0.1pVzczHvHB9KQIY3qxwPgPPhf5a8nlHLEPAppGLnQAE';
        
        const { createClient } = window.supabase;
        const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

        // Elementos do formulÃ¡rio
        const form = document.getElementById('formPrestador');
        const successMessage = document.getElementById('successMessage');
        const errorMessage = document.getElementById('errorMessage');

        // Submeter formulÃ¡rio
        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            // Limpar mensagens anteriores
            successMessage.classList.add('hidden');
            errorMessage.classList.add('hidden');

            // Coletar dados do formulÃ¡rio
            const formData = {
                nome: document.getElementById('nome').value,
                email: document.getElementById('email').value,
                telefone: document.getElementById('telefone').value,
                profissao: document.getElementById('profissao').value,
                categoria: document.getElementById('categoria').value,
                descricao: document.getElementById('descricao').value,
                avaliacao: 0,
                verificado: false,
                selo_superqi: false
            };

            try {
                // Inserir no Supabase
                const { data, error } = await supabase
                    .from('prestadores')
                    .insert([formData]);

                if (error) {
                    throw error;
                }

                // Mostrar mensagem de sucesso
                successMessage.classList.remove('hidden');
                form.reset();

                // Redirecionar apÃ³s 2 segundos
                setTimeout(() => {
                    window.location.href = '/';
                }, 2000);

            } catch (error) {
                console.error('Erro:', error);
                errorMessage.textContent = 'âŒ Erro ao cadastrar: ' + error.message;
                errorMessage.classList.remove('hidden');
            }
        });
    </script>
</body>
</html>

