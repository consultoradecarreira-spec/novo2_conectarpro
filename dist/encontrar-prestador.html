<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encontrar Prestador - ConectarPRO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
            <a href="/" class="text-3xl font-bold">
                <span class="text-black">Conectar</span><span class="text-orange-500">PRO</span>
            </a>
            
            <!-- Desktop Menu -->
            <nav class="hidden md:flex gap-8 items-center">
                <a href="/encontrar-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium">Encontrar Prestador</a>
                <a href="/indicar-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium">Indicar Prestador</a>
                <a href="/cadastro-morador.html" class="text-gray-700 hover:text-orange-500 transition font-medium">Sou Morador</a>
                <a href="/cadastro-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium">Sou Prestador</a>
                <a href="#" class="text-gray-700 hover:text-orange-500 transition font-medium">Blog</a>
                <a href="#" class="text-gray-700 hover:text-orange-500 transition font-medium">Entrar</a>
            </nav>
            
            <!-- Mobile Menu Button -->
            <button class="md:hidden text-gray-700" onclick="toggleMobileMenu()">‚ò∞</button>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobileMenu" class="hidden md:hidden bg-white border-t border-gray-200">
            <nav class="max-w-7xl mx-auto px-4 py-4 flex flex-col gap-4">
                <a href="/encontrar-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Encontrar Prestador</a>
                <a href="/indicar-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Indicar Prestador</a>
                <a href="/cadastro-morador.html" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Sou Morador</a>
                <a href="/cadastro-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Sou Prestador</a>
                <a href="#" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Blog</a>
                <a href="#" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Entrar</a>
            </nav>
        </div>
    </header>
    
    <script>
        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        }
    </script>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 py-12">
        <!-- Filtros Section -->
        <div class="bg-white rounded-lg shadow-lg p-8 mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-2">Encontre o Prestador Ideal</h1>
            <p class="text-gray-600 mb-8">Filtre pelos melhores profissionais para o seu condom√≠nio.</p>

            <!-- Search Box -->
            <input type="text" id="busca" placeholder="Buscar por nome ou servi√ßo..." class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg mb-6 focus:ring-2 focus:ring-orange-500 focus:border-transparent">

            <!-- Filtros Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                <!-- Categoria -->
                <select id="categoria" class="px-4 py-3 border-2 border-teal-300 rounded-lg focus:ring-2 focus:ring-orange-500">
                    <option value="">Pinturas & Cia</option>
                    <option value="Alimenta√ß√£o">Alimenta√ß√£o</option>
                    <option value="Automotivo">Automotivo</option>
                    <option value="Bem-Estar">Bem-Estar</option>
                    <option value="Carreira e Consultoria">Carreira e Consultoria</option>
                    <option value="Costuras e Reparos">Costuras e Reparos</option>
                    <option value="Dedetiza√ß√£o">Dedetiza√ß√£o</option>
                    <option value="Delivery">Delivery</option>
                    <option value="Eventos e Lazer">Eventos e Lazer</option>
                    <option value="Jardinagem">Jardinagem</option>
                    <option value="Mudan√ßas e Carretos">Mudan√ßas e Carretos</option>
                    <option value="Pets">Pets</option>
                    <option value="Pinturas & Cia">Pinturas & Cia</option>
                    <option value="Presentes e Mimos">Presentes e Mimos</option>
                    <option value="Reformas e Reparos">Reformas e Reparos</option>
                    <option value="Seguran√ßa">Seguran√ßa</option>
                    <option value="Servi√ßos de Emerg√™ncia">Servi√ßos de Emerg√™ncia</option>
                    <option value="Servi√ßos Dom√©sticos">Servi√ßos Dom√©sticos</option>
                    <option value="Sustentabilidade">Sustentabilidade</option>
                    <option value="Transporte">Transporte</option>
                    <option value="Viagem e Turismo">Viagem e Turismo</option>
                </select>

                <!-- Avalia√ß√£o -->
                <select id="avaliacao" class="px-4 py-3 border-2 border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500">
                    <option value="">Qualquer Avalia√ß√£o</option>
                    <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5 Estrelas</option>
                    <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê 4+ Estrelas</option>
                    <option value="3">‚≠ê‚≠ê‚≠ê 3+ Estrelas</option>
                </select>

                <!-- Estado -->
                <select id="estado" class="px-4 py-3 border-2 border-blue-300 rounded-lg focus:ring-2 focus:ring-orange-500">
                    <option value="">Todos os Estados</option>
                    <option value="SP">S√£o Paulo</option>
                    <option value="RJ">Rio de Janeiro</option>
                    <option value="MG">Minas Gerais</option>
                    <option value="BA">Bahia</option>
                    <option value="RS">Rio Grande do Sul</option>
                </select>

                <!-- Cidade -->
                <select id="cidade" class="px-4 py-3 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-orange-500">
                    <option value="">Todas as Cidades</option>
                </select>

                <!-- Selo -->
                <select id="selo" class="px-4 py-3 border-2 border-teal-300 rounded-lg focus:ring-2 focus:ring-orange-500">
                    <option value="">Todos</option>
                    <option value="true">üõ°Ô∏è Selo SuperQI</option>
                </select>

                <!-- Filtro Avan√ßado -->
                <input type="text" id="filtroAvancado" placeholder="Bairro, condom√≠nio, experi√™ncia..." class="px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500">
            </div>

            <!-- Resultado -->
            <div class="text-center py-8">
                <p id="resultadoText" class="text-gray-600 font-semibold">0 prestador(es) encontrado(s).</p>
                <p class="text-gray-500 text-sm">Nenhum prestador encontrado com os filtros selecionados.</p>
            </div>

            <!-- Selecione um prestador -->
            <div class="text-center py-12">
                <p class="text-5xl mb-4">üîç</p>
                <h3 class="text-2xl font-bold text-gray-900 mb-2">Selecione um prestador</h3>
                <p class="text-gray-600">Clique em um perfil na lista ao lado para ver os detalhes completos, avalia√ß√µes e informa√ß√µes de contato.</p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 py-12 mt-12">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">
                        <span class="text-black">Conectar</span><span class="text-orange-500">PRO</span>
                    </h3>
                    <p class="text-gray-600 text-sm">Conectando Condom√≠nios e Prestadores de Servi√ßo com seguran√ßa e qualidade.</p>
                </div>
                <div>
                    <h4 class="font-bold text-orange-500 mb-4">Para Moradores</h4>
                    <ul class="space-y-2 text-sm text-gray-600">
                        <li><a href="/encontrar-prestador.html" class="hover:text-orange-500 transition">Encontrar Prestadores</a></li>
                        <li><a href="/indicar-prestador.html" class="hover:text-orange-500 transition">Indicar Prestador</a></li>
                        <li><a href="#" class="hover:text-orange-500 transition">Planos</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-orange-500 mb-4">Para Prestadores</h4>
                    <ul class="space-y-2 text-sm text-gray-600">
                        <li><a href="/cadastro-prestador.html" class="hover:text-orange-500 transition">Cadastrar-se</a></li>
                        <li><a href="#" class="hover:text-orange-500 transition">Selo SuperQI</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-orange-500 mb-4">Suporte</h4>
                    <ul class="space-y-2 text-sm text-gray-600">
                        <li><a href="#" class="hover:text-orange-500 transition">FAQ</a></li>
                        <li><a href="#" class="hover:text-orange-500 transition">Pol√≠tica de Privacidade</a></li>
                    </ul>
                </div>
            </div>

            <div class="bg-teal-50 border-2 border-teal-300 rounded-lg p-4 mb-8 text-center">
                <p class="text-teal-700 text-sm font-semibold">
                    üîµ Selo SuperQI ‚Äî Garantia de Qualidade e Integridade: prestadores verificados e bem avaliados pela comunidade ConectarPRO.
                </p>
            </div>

            <div class="border-t border-gray-200 pt-8 text-center text-sm text-gray-600">
                <p>&copy; 2025 ConectarPRO. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        // Inicializar Supabase
        const SUPABASE_URL = 'https://dvbomxvwqspdtyeuyiwl.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR2Ym9teHZ3cXNwZHR5ZXV5aXdsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI2NTU4NjEsImV4cCI6MjA3ODIzMTg2MX0.1pVzczHvHB9KQIY3qxwPgPPhf5a8nlHLEPAppGLnQAE';
        
        const { createClient } = window.supabase;
        const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

        // Event listeners para filtros
        document.getElementById('busca').addEventListener('input', filtrar);
        document.getElementById('categoria').addEventListener('change', filtrar);
        document.getElementById('avaliacao').addEventListener('change', filtrar);
        document.getElementById('estado').addEventListener('change', filtrar);
        document.getElementById('cidade').addEventListener('change', filtrar);
        document.getElementById('selo').addEventListener('change', filtrar);
        document.getElementById('filtroAvancado').addEventListener('input', filtrar);

        async function filtrar() {
            try {
                const { data, error } = await supabase
                    .from('prestadores')
                    .select('*');

                if (error) throw error;

                let prestadores = data || [];

                // Aplicar filtros
                const busca = document.getElementById('busca').value.toLowerCase();
                const categoria = document.getElementById('categoria').value;
                const avaliacao = document.getElementById('avaliacao').value;
                const selo = document.getElementById('selo').value;
                const filtroAvancado = document.getElementById('filtroAvancado').value.toLowerCase();

                prestadores = prestadores.filter(p => {
                    let match = true;

                    if (busca) {
                        match = match && (p.nome.toLowerCase().includes(busca) || p.profissao.toLowerCase().includes(busca));
                    }

                    if (categoria) {
                        match = match && p.categoria === categoria;
                    }

                    if (avaliacao) {
                        match = match && parseFloat(p.avaliacao) >= parseFloat(avaliacao);
                    }

                    if (selo === 'true') {
                        match = match && p.selo_superqi === true;
                    }

                    if (filtroAvancado) {
                        match = match && (p.nome.toLowerCase().includes(filtroAvancado) || 
                                        p.descricao?.toLowerCase().includes(filtroAvancado));
                    }

                    return match;
                });

                // Atualizar resultado
                const resultadoText = document.getElementById('resultadoText');
                resultadoText.textContent = `${prestadores.length} prestador(es) encontrado(s).`;

            } catch (error) {
                console.error('Erro:', error);
            }
        }
    </script>
</body>
</html>

