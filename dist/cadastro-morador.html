<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Morador - ConectarPRO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
            <a href="/" class="text-3xl font-bold">
                <span class="text-black">Conectar</span><span class="text-orange-500">PRO</span>
            </a>
            
            <!-- Desktop Menu -->
            <nav class="hidden md:flex gap-8 items-center">
                <a href="/encontrar-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium">Encontrar Prestador</a>
                <a href="/indicar-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium">Indicar Prestador</a>
                <a href="/cadastro-morador.html" class="text-gray-700 hover:text-orange-500 transition font-medium">Sou Morador</a>
                <a href="/cadastro-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium">Sou Prestador</a>
                <a href="#" class="text-gray-700 hover:text-orange-500 transition font-medium">Blog</a>
                <a href="#" class="text-gray-700 hover:text-orange-500 transition font-medium">Entrar</a>
            </nav>
            
            <!-- Mobile Menu Button -->
            <button class="md:hidden text-gray-700" onclick="toggleMobileMenu()">‚ò∞</button>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobileMenu" class="hidden md:hidden bg-white border-t border-gray-200">
            <nav class="max-w-7xl mx-auto px-4 py-4 flex flex-col gap-4">
                <a href="/encontrar-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Encontrar Prestador</a>
                <a href="/indicar-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Indicar Prestador</a>
                <a href="/cadastro-morador.html" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Sou Morador</a>
                <a href="/cadastro-prestador.html" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Sou Prestador</a>
                <a href="#" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Blog</a>
                <a href="#" class="text-gray-700 hover:text-orange-500 transition font-medium py-2">Entrar</a>
            </nav>
        </div>
    </header>
    
    <script>
        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        }
    </script>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 py-12">
        <!-- Hero Section -->
        <div class="bg-gradient-to-r from-orange-400 to-orange-600 text-white rounded-lg p-8 mb-12">
            <a href="/" class="text-white hover:text-gray-200 mb-4 inline-block">‚Üê Voltar</a>
            <h1 class="text-4xl font-bold mb-2">Cadastro de Morador</h1>
            <p class="text-orange-100">Junte-se √† nossa plataforma de servi√ßos para condom√≠nios</p>
        </div>

        <!-- Progress Bar -->
        <div class="mb-12">
            <div class="flex justify-between items-center mb-4">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-orange-500 text-white rounded-full flex items-center justify-center font-bold step-indicator" data-step="1">1</div>
                    <span class="text-gray-700 font-semibold step-label">Dados Pessoais</span>
                </div>
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center font-bold step-indicator" data-step="2">2</div>
                    <span class="text-gray-500 step-label">Localiza√ß√£o</span>
                </div>
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center font-bold step-indicator" data-step="3">3</div>
                    <span class="text-gray-500 step-label">Plano</span>
                </div>
            </div>
            <div class="w-full bg-gray-300 h-2 rounded-full">
                <div class="bg-orange-500 h-2 rounded-full progress-bar" style="width: 33%"></div>
            </div>
        </div>

        <!-- Form Container -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- Left Column - Form -->
            <div class="md:col-span-2">
                <div class="bg-white rounded-lg shadow-lg p-8">
                    <!-- Step 1: Dados Pessoais -->
                    <div id="step-1" class="step-content">
                        <h2 class="text-2xl font-bold text-gray-900 mb-2">Seus Dados Pessoais</h2>
                        <p class="text-gray-600 mb-6">Conte-nos um pouco sobre voc√™</p>

                        <form class="space-y-6">
                            <div>
                                <label class="block text-gray-700 font-semibold mb-2">Nome Completo *</label>
                                <input type="text" id="nome" placeholder="Seu nome completo" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:border-orange-500" required>
                            </div>

                            <div>
                                <label class="block text-gray-700 font-semibold mb-2">E-mail *</label>
                                <input type="email" id="email" placeholder="seu@email.com" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:border-orange-500" required>
                            </div>

                            <div>
                                <label class="block text-gray-700 font-semibold mb-2">Telefone/WhatsApp *</label>
                                <input type="tel" id="telefone" placeholder="(11) 99999-9999" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:border-orange-500" required>
                            </div>

                            <div class="flex gap-4">
                                <button type="button" class="flex-1 text-gray-700 border border-gray-300 rounded-lg px-4 py-2 hover:bg-gray-50" onclick="goToStep(0)">‚Üê Anterior</button>
                                <button type="button" class="flex-1 bg-orange-500 text-white rounded-lg px-4 py-2 hover:bg-orange-600 font-semibold" onclick="goToStep(2)">Pr√≥ximo ‚Üí</button>
                            </div>
                        </form>
                    </div>

                    <!-- Step 2: Localiza√ß√£o -->
                    <div id="step-2" class="step-content hidden">
                        <h2 class="text-2xl font-bold text-gray-900 mb-2">Localiza√ß√£o</h2>
                        <p class="text-gray-600 mb-6">Onde voc√™ est√° localizado?</p>

                        <form class="space-y-6">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-gray-700 font-semibold mb-2">Cidade *</label>
                                    <input type="text" id="cidade" placeholder="Sua cidade" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:border-orange-500" required>
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-semibold mb-2">Estado *</label>
                                    <select id="estado" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:border-orange-500" required>
                                        <option>Selecione o estado</option>
                                        <option>SP</option>
                                        <option>RJ</option>
                                        <option>MG</option>
                                        <option>BA</option>
                                        <option>SC</option>
                                    </select>
                                </div>
                            </div>

                            <div>
                                <label class="block text-gray-700 font-semibold mb-2">Bairro *</label>
                                <input type="text" id="bairro" placeholder="Seu bairro" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:border-orange-500" required>
                            </div>

                            <div>
                                <label class="block text-gray-700 font-semibold mb-2">Condom√≠nio (opcional)</label>
                                <input type="text" id="condominio" placeholder="Nome do condom√≠nio" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:border-orange-500">
                            </div>

                            <div class="flex gap-4">
                                <button type="button" class="flex-1 text-gray-700 border border-gray-300 rounded-lg px-4 py-2 hover:bg-gray-50" onclick="goToStep(1)">‚Üê Anterior</button>
                                <button type="button" class="flex-1 bg-orange-500 text-white rounded-lg px-4 py-2 hover:bg-orange-600 font-semibold" onclick="goToStep(3)">Pr√≥ximo ‚Üí</button>
                            </div>
                        </form>
                    </div>

                    <!-- Step 3: Plano -->
                    <div id="step-3" class="step-content hidden">
                        <h2 class="text-2xl font-bold text-gray-900 mb-2">Escolha seu Plano</h2>
                        <p class="text-gray-600 mb-6">Selecione o plano que melhor atende suas necessidades</p>

                        <div class="space-y-4 mb-6">
                            <label class="flex items-center p-4 border-2 border-gray-300 rounded-lg cursor-pointer hover:border-orange-500">
                                <input type="radio" name="plano" value="gratuito" class="mr-4" checked>
                                <div>
                                    <p class="font-semibold text-gray-900">Gratuito</p>
                                    <p class="text-gray-600 text-sm">Ideal para come√ßar</p>
                                </div>
                            </label>

                            <label class="flex items-center p-4 border-2 border-orange-500 rounded-lg cursor-pointer bg-orange-50">
                                <input type="radio" name="plano" value="premium" class="mr-4">
                                <div>
                                    <p class="font-semibold text-gray-900">Premium - R$ 19,90/m√™s</p>
                                    <p class="text-gray-600 text-sm">Mais popular</p>
                                </div>
                            </label>

                            <label class="flex items-center p-4 border-2 border-gray-300 rounded-lg cursor-pointer hover:border-orange-500">
                                <input type="radio" name="plano" value="condominio" class="mr-4">
                                <div>
                                    <p class="font-semibold text-gray-900">Condom√≠nio - Sob consulta</p>
                                    <p class="text-gray-600 text-sm">Para condom√≠nios</p>
                                </div>
                            </label>
                        </div>

                        <p class="text-xs text-gray-600 mb-6">
                            Eu concordo com os <a href="#" class="text-orange-500 hover:underline">Termos de Uso</a> e <a href="#" class="text-orange-500 hover:underline">Pol√≠tica de Privacidade</a>
                        </p>

                        <div class="flex gap-4">
                            <button type="button" class="flex-1 text-gray-700 border border-gray-300 rounded-lg px-4 py-2 hover:bg-gray-50" onclick="goToStep(2)">‚Üê Anterior</button>
                            <button type="button" class="flex-1 bg-green-500 text-white rounded-lg px-4 py-2 hover:bg-green-600 font-semibold" onclick="submitForm()">Finalizar Cadastro</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Info Box -->
            <div class="bg-orange-50 rounded-lg p-6 border border-orange-200 h-fit">
                <h3 class="text-lg font-bold text-gray-900 mb-4">Por que se cadastrar?</h3>
                <ul class="space-y-3">
                    <li class="flex items-start gap-3">
                        <span class="text-orange-500 font-bold">‚úì</span>
                        <span class="text-gray-700">Prestadores verificados e avaliados</span>
                    </li>
                    <li class="flex items-start gap-3">
                        <span class="text-orange-500 font-bold">‚úì</span>
                        <span class="text-gray-700">Comunidade de +10.000 moradores</span>
                    </li>
                    <li class="flex items-start gap-3">
                        <span class="text-orange-500 font-bold">‚úì</span>
                        <span class="text-gray-700">Seguran√ßa e confian√ßa garantidas</span>
                    </li>
                </ul>

                <div class="mt-8 pt-6 border-t border-orange-200">
                    <div class="text-center mb-6">
                        <p class="text-4xl font-bold text-orange-600">500+</p>
                        <p class="text-gray-600">Prestadores Verificados</p>
                    </div>
                    <div class="text-center mb-6">
                        <p class="text-4xl font-bold text-orange-600">4.8‚òÖ</p>
                        <p class="text-gray-600">Avalia√ß√£o M√©dia</p>
                    </div>
                    <div class="text-center">
                        <p class="text-4xl font-bold text-orange-600">1.200+</p>
                        <p class="text-gray-600">Servi√ßos Realizados</p>
                    </div>
                </div>

                <div class="mt-8 bg-gray-900 text-white rounded-lg p-4 text-center">
                    <p class="text-sm mb-2">üë• Tem uma conta?</p>
                    <p class="text-xs text-gray-400 mb-3">Fa√ßa login e acesse sua conta</p>
                    <a href="/login.html" class="block bg-white text-gray-900 py-2 rounded font-semibold hover:bg-gray-100">Fazer Login</a>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center text-gray-600">
            <p>&copy; 2025 ConectarPRO. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script>
        // Inicializar Supabase
        const SUPABASE_URL = 'https://dvbomxvwqspdtyeuyiwl.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR2Ym9teHZ3cXNwZHR5ZXV5aXdsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI2NTU4NjEsImV4cCI6MjA3ODIzMTg2MX0.1pVzczHvHB9KQIY3qxwPgPPhf5a8nlHLEPAppGLnQAE';
        
        const { createClient } = window.supabase;
        const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

        let currentStep = 1;

        function goToStep(step) {
            // Ocultar todos os steps
            document.querySelectorAll('.step-content').forEach(el => el.classList.add('hidden'));
            
            // Mostrar step selecionado
            document.getElementById(`step-${step}`).classList.remove('hidden');
            
            // Atualizar progress bar
            const progress = (step / 3) * 100;
            document.querySelector('.progress-bar').style.width = progress + '%';
            
            // Atualizar indicadores
            document.querySelectorAll('.step-indicator').forEach((el, idx) => {
                if (idx + 1 <= step) {
                    el.classList.remove('bg-gray-300', 'text-gray-600');
                    el.classList.add('bg-orange-500', 'text-white');
                } else {
                    el.classList.remove('bg-orange-500', 'text-white');
                    el.classList.add('bg-gray-300', 'text-gray-600');
                }
            });
            
            currentStep = step;
        }

        async function submitForm() {
            const formData = {
                nome: document.getElementById('nome').value,
                email: document.getElementById('email').value,
                telefone: document.getElementById('telefone').value,
                endereco: `${document.getElementById('bairro').value}, ${document.getElementById('cidade').value}`,
                condominio: document.getElementById('condominio').value || null
            };

            try {
                const { data, error } = await supabase
                    .from('moradores')
                    .insert([formData]);

                if (error) throw error;

                alert('‚úÖ Cadastro realizado com sucesso!');
                window.location.href = '/';
            } catch (error) {
                alert('‚ùå Erro ao cadastrar: ' + error.message);
            }
        }
    </script>
</body>
</html>

